# 🚀 캘리뷰 확장 기능 기획

## Phase 6.6: 메인페이지 개선 및 추천 시스템

### 1. 사이트별 스페셜 체험단

#### 1-1. 개요
메인페이지에 각 체험단 사이트별로 선별된 체험단 리스트를 보여주어 사용자의 발견 가능성과 참여도를 높입니다.

#### 1-2. 구성

```
┌──────────────────────────────────────┐
│ [히어로 섹션]                         │
│ 캘리뷰 - 체험단 통합 검색              │
│ [검색바]                              │
└──────────────────────────────────────┘

┌──────────────────────────────────────┐
│ 🆕 리뷰노트 - 신규 캠페인              │
│ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐      │
│ │ 1 │ │ 2 │ │ 3 │ │ 4 │ │ 5 │ [더보기→]│
│ └───┘ └───┘ └───┘ └───┘ └───┘      │
└──────────────────────────────────────┘

┌──────────────────────────────────────┐
│ ⏰ 디너의여왕 - 마감 임박               │
│ [체험단 카드 5개]              [더보기→]│
└──────────────────────────────────────┘

┌──────────────────────────────────────┐
│ 🔥 강남맛집 - 인기 체험단               │
│ [체험단 카드 5개]              [더보기→]│
└──────────────────────────────────────┘

┌──────────────────────────────────────┐
│ ⭐ 리뷰플레이스 - 프리미엄 제품          │
│ [체험단 카드 5개]              [더보기→]│
└──────────────────────────────────────┘
```

#### 1-3. 선별 기준

| 사이트 | 선별 기준 | 정렬 |
|--------|----------|------|
| 리뷰노트 | 최근 등록된 캠페인 | 등록일 최신순 TOP 5 |
| 디너의여왕 | 마감이 임박한 캠페인 | 마감일 가까운순 TOP 5 |
| 강남맛집 | 조회수 많은 캠페인 | 무작위 또는 최신순 TOP 5 |
| 리뷰플레이스 | 프리미엄 제품 캠페인 | 최신순 TOP 5 |

#### 1-4. API 엔드포인트

```typescript
// /api/campaigns/featured
GET /api/campaigns/featured?site=reviewnote&limit=5
GET /api/campaigns/featured?site=dinnerqueen&limit=5
// ...
```

#### 1-5. UI 특징
- 카드 슬라이더 (모바일) 또는 그리드 (데스크톱)
- 각 섹션별 브랜드 컬러
- "더보기" 클릭 시 검색 페이지 (해당 사이트 필터)
- 반응형 디자인

---

### 2. AI 추천 체험단

#### 2-1. 개요
사용자의 검색, 북마크, 신청 기록을 분석하여 개인화된 체험단을 추천합니다.

#### 2-2. 추천 알고리즘

##### 단계 1: 사용자 프로필 생성
```python
user_profile = {
    "preferred_regions": ["강남", "홍대", "신촌"],  # 검색/북마크 빈도순
    "preferred_categories": ["맛집", "카페"],      # 검색/북마크 빈도순
    "preferred_channels": ["블로그", "인스타"],    # 북마크/신청 빈도순
    "preferred_types": ["방문형"],                # 신청 기록 기반
    "preferred_sites": ["reviewnote", "dinnerqueen"],  # 신청 성공률 높은 사이트
    "active_time": ["evening"],                   # 주로 활동하는 시간대
}
```

##### 단계 2: 가중치 계산
```python
score = (
    search_weight * 0.3 +    # 검색 기록 30%
    bookmark_weight * 0.4 +  # 북마크 기록 40%
    apply_weight * 0.3       # 신청 기록 30%
)

# 시간 가중치 (최근 행동 우선)
time_decay = 1 / (1 + days_since_action * 0.1)
final_score = score * time_decay
```

##### 단계 3: 추천 생성
- 상위 10개 캠페인 선정
- 다양성 보장 (같은 사이트 최대 3개)
- 마감 지난 캠페인 제외

#### 2-3. 데이터 소스

| 데이터 | 테이블 | 분석 내용 |
|--------|--------|----------|
| 검색 기록 | search_history | 지역, 카테고리, 키워드 빈도 |
| 북마크 기록 | applications (bookmarked) | 선호 사이트, 채널, 유형 |
| 신청 기록 | applications (applied) | 실제 신청한 캠페인 특성 |
| 당첨 기록 | applications (selected) | 당첨률 높은 사이트/유형 |

#### 2-4. API 엔드포인트

```typescript
// /api/recommendations
GET /api/recommendations?user_id={userId}&limit=10

Response:
{
  "recommendations": [
    {
      "campaign": {...},
      "score": 0.85,
      "reason": "최근 '강남' 지역 맛집을 자주 검색하셨어요"
    }
  ]
}
```

#### 2-5. UI 배치

**옵션 A: 메인페이지 최상단**
```
[히어로 섹션]
[당신을 위한 추천 체험단] ⬅️ 여기
[사이트별 스페셜 체험단]
```

**옵션 B: 검색 페이지 상단**
```
[검색바]
[필터]
[맞춤 추천] ⬅️ 여기
[검색 결과]
```

**옵션 C: 마이페이지**
```
[마감 임박 알림]
[추천 체험단] ⬅️ 여기
[카드 메뉴]
[캘린더]
```

#### 2-6. 추천 이유 표시

사용자에게 왜 추천되었는지 투명하게 안내:
- "최근 '강남' 지역을 자주 검색하셨어요"
- "비슷한 맛집 체험단을 북마크하셨어요"
- "리뷰노트에서 높은 당첨률을 보이고 있어요"

#### 2-7. 개인정보 보호
- 모든 분석은 서버에서만 수행
- 사용자 행동 데이터는 암호화 저장
- 추천 끄기 옵션 제공 (설정 페이지)

---

### 3. 구현 우선순위

| 순위 | 기능 | 이유 | 예상 공수 |
|------|------|------|----------|
| 1 | 사이트별 스페셜 체험단 | 간단하고 효과적, 메인페이지 개선 | 1-2일 |
| 2 | AI 추천 체험단 (기본 버전) | 단순 규칙 기반 추천 (최근 검색/북마크) | 2-3일 |
| 3 | AI 추천 체험단 (고급 버전) | ML 기반 추천, A/B 테스트 | 5-7일 |

---

### 4. 성공 지표 (KPI)

#### 사이트별 스페셜 체험단
- 메인페이지 체류 시간 증가
- 클릭률 (CTR) 측정
- 검색 전환율 (메인 → 검색)

#### AI 추천 체험단
- 추천 클릭률 (CTR)
- 추천 → 북마크 전환율
- 추천 → 신청 전환율
- 사용자 만족도 (좋아요/싫어요)

---

### 5. 기술 스택

- **프론트엔드**: React 컴포넌트, Swiper.js (슬라이더)
- **백엔드**: Next.js API Routes
- **데이터베이스**: Supabase (기존 테이블 활용)
- **추천 엔진**: 
  - Phase 1: 규칙 기반 (간단)
  - Phase 2: Python + scikit-learn (협업 필터링)
  - Phase 3: TensorFlow/PyTorch (딥러닝)

---

### 6. 다음 단계

1. **Phase 6.5 완료 후** 사이트별 스페셜 체험단 구현
2. **사용자 데이터 축적 후** AI 추천 체험단 구현 (최소 100명 이상 권장)
3. **A/B 테스트**로 효과 검증
4. **점진적 개선**


