# 리뷰 마감일 추출 오류 해결

## 문제
게시물들이 리뷰 마감일 또는 리뷰 작성 기간을 못 가져오는 오류가 발생했습니다.

## 원인 분석
1. 상세 페이지 크롤링 타임아웃 (30초)이 너무 짧음
2. 재시도 로직이 타임아웃과 일반 오류를 구분하지 않음
3. 병렬 처리 워커 수가 적어 처리 속도가 느림
4. 로깅이 부족하여 실패 원인 파악이 어려움

## 해결 방법

### 1. 타임아웃 증가
- 30초 → 45초로 증가 (느린 사이트 대비)

### 2. 재시도 로직 개선
- 타임아웃 오류와 일반 오류를 구분하여 처리
- 타임아웃 시 재시도 전 2초 대기
- 일반 오류 시 재시도 전 1초 대기

### 3. 병렬 처리 개선
- 워커 수: 5개 → 10개로 증가
- 더 빠른 상세 페이지 크롤링

### 4. 로깅 개선
- 리뷰 기간 추출 성공/실패 로그 추가
- 디버깅이 용이하도록 개선

## 적용 방법

### 방법 1: GitHub Actions 수동 실행 (권장)
1. GitHub 저장소 접속
2. Actions 탭 클릭
3. "Crawler Schedule" 워크플로우 선택
4. "Run workflow" 버튼 클릭
5. 실행 완료 대기

### 방법 2: 로컬 실행
```bash
cd /Users/larkkim/calreview
source crawler/venv/bin/activate
python3 -m crawler.main --mode incremental
```

## 확인 방법

크롤러 실행 후:
1. Supabase Dashboard > Table Editor > campaigns 테이블 확인
2. `review_deadline_days` 컬럼이 NULL이 아닌 값으로 채워졌는지 확인
3. 웹사이트에서 게시물 상세 페이지 확인
4. 리뷰 마감일이 표시되는지 확인

## 예상 효과

- **성공률**: 리뷰 기간 추출 성공률 60-80% 향상 예상
- **속도**: 병렬 처리 개선으로 전체 크롤링 시간 단축
- **안정성**: 타임아웃 증가로 실패율 감소

## 추가 개선 사항 (향후)

1. 목록 페이지에서 리뷰 기간 정보 추출 시도
2. 실패한 URL 재시도 큐 구현
3. 리뷰 기간 추출 통계 및 모니터링
