# 전체 서비스 비용 분석 및 전략

> **작성일**: 2024-12-19  
> **목적**: 프로젝트에서 사용하는 모든 서비스의 비용 발생 가능성 종합 분석

## 📊 서비스별 상세 분석

### 1. Vercel (배포 및 서버리스 함수)

**무료 플랜 한도:**
- 함수 실행 시간: 100GB-hours/월
- 대역폭: 100GB/월
- 빌드 시간: 6,000분/월

**Phase 1 예상 사용량 (MAU 5,000명 기준):**
- 크롤러 API: 일 100회 × 3초 = 300초/일 = 2.5시간/월
- 검색 API: 일 500회 × 0.5초 = 250초/일 = 2.1시간/월
- 신청/북마크 API: 일 200회 × 0.3초 = 60초/일 = 0.5시간/월
- 캘린더 연동 API: 일 50회 × 1초 = 50초/일 = 0.4시간/월
- 기타 API: 일 200회 × 0.2초 = 40초/일 = 0.3시간/월
- **총 함수 실행 시간: 5.8시간/월**
- **사용률: 5.8% (여유 있음)**

**리스크:** 낮음 ✅

**대응:**
- 모니터링 및 최적화
- 무료 플랜 한도 80% 도달 시 알림

---

### 2. Supabase (데이터베이스, 인증, 스토리지)

**무료 플랜 한도:**
- 데이터베이스 크기: 500MB
- 대역폭 (Egress): 5GB/월
- MAU (Monthly Active Users): 50,000명
- 스토리지: 1GB
- Edge Functions: 500,000회/월

**Phase 1 예상 사용량 (MAU 5,000명 기준):**

**데이터베이스 크기:**
- 캠페인 데이터: 400개 × 5KB = 2MB
- 사용자 데이터: 5,000명 × 2KB = 10MB
- 신청 데이터: 10,000건 × 1KB = 10MB
- 검색 기록: 50,000건 × 0.5KB = 25MB
- 기타 데이터: 50MB
- **총 예상 크기: 약 100MB**
- **사용률: 20% (여유 있음)**

**대역폭 (Egress):**
- 검색 API 응답: 일 500회 × 50KB = 25MB/일 = 750MB/월
- 신청 목록 조회: 일 200회 × 30KB = 6MB/일 = 180MB/월
- 캠페인 상세: 일 300회 × 20KB = 6MB/일 = 180MB/월
- 기타: 200MB/월
- **총 예상 대역폭: 약 1.3GB/월**
- **사용률: 26% (여유 있음)**

**MAU:**
- **예상 MAU: 5,000명**
- **사용률: 10% (여유 있음)**

**리스크:** 낮음 ✅

**대응:**
- 데이터 최적화 (오래된 로그 정리)
- 쿼리 최적화 (페이지네이션, 인덱스)
- 무료 플랜 한도 80% 도달 시 알림

**초과 시 비용:**
- 데이터베이스 크기 초과: Pro 플랜 필요 ($25/월)
- 대역폭 초과: $0.09/GB
- MAU 초과: $0.00325/MAU

---

### 3. Google Calendar API

**할당량:**
- 무제한 (비용 없음)
- Rate Limit: 분당 1,000회 (충분함)

**Phase 1 예상 사용량:**
- 이벤트 생성: 일 50회
- 이벤트 조회: 일 100회
- 이벤트 업데이트: 일 20회
- 이벤트 삭제: 일 10회
- **총 API 호출: 일 180회 = 월 5,400회**

**리스크:** 없음 ✅

**대응:** 불필요

---

### 4. GitHub Actions (크롤러 스케줄링)

**무료 플랜 한도:**
- **Public Repository**: 무제한 무료 ✅
- **Private Repository**: 2,000분/월
- Artifact Storage: 500MB (Public), 1GB (Private)

**Phase 1 예상 사용량:**
- 크롤러 실행: 일 2회 × 30분 = 60분/일 = 1,800분/월
- **Private Repository 기준 사용률: 90% (주의 필요) ⚠️**

**리스크:** 중간 (Private repo인 경우)

**대응:**
1. **Public Repository로 전환 (최우선 권장)**
   - Public repository는 무제한 무료
   - 크롤러 코드는 공개해도 문제없음
   - **비용: $0**

2. **크롤러 실행 시간 최적화**
   - 불필요한 사이트 크롤링 제거
   - 병렬 처리 최적화
   - 실패한 크롤링 재시도 최소화

3. **크롤러 실행 빈도 조정**
   - 일 2회 → 일 1회 (필요 시)
   - 또는 주 3회로 조정

**초과 시 비용 (Private repo):**
- Linux: $0.008/분
- Windows: $0.016/분
- macOS: $0.08/분

---

### 5. Google OAuth (로그인)

**할당량:**
- 무제한 (비용 없음)

**Phase 1 예상 사용량:**
- 로그인: 일 50회 = 월 1,500회

**리스크:** 없음 ✅

**대응:** 불필요

---

### 6. Naver OAuth (로그인)

**할당량:**
- 무제한 (비용 없음)

**Phase 1 예상 사용량:**
- 로그인: 일 50회 = 월 1,500회

**리스크:** 없음 ✅

**대응:** 불필요

---

### 7. Resend (이메일 발송)

**무료 플랜 한도:**
- 3,000건/월
- 100건/일

**Phase 1 예상 사용량:**
- **0건 (Phase 1 미사용)**

**리스크:** 없음 ✅

**대응:** 불필요

---

## 💰 Phase 1 총 비용 요약

| 서비스 | 비용 | 리스크 | 대응 |
|--------|------|--------|------|
| Vercel | $0 | 낮음 | 모니터링 |
| Supabase | $0 | 낮음 | 데이터 최적화 |
| Google Calendar API | $0 | 없음 | - |
| GitHub Actions | $0* | 중간* | Public repo 전환 |
| Google OAuth | $0 | 없음 | - |
| Naver OAuth | $0 | 없음 | - |
| Resend | $0 | 없음 | - |
| **총계** | **$0** | - | - |

*Private repository인 경우 90% 사용률로 주의 필요. Public repository로 전환 권장.

---

## ⚠️ 주요 리스크 및 대응 전략

### 리스크 1: GitHub Actions (Private Repository)

**문제:**
- Private repository에서 2,000분/월 한도
- 예상 사용량: 1,800분/월 (90% 사용률)
- 한도 초과 시 추가 비용 발생

**해결책:**
- **Public Repository로 전환 (최우선)**
  - 무제한 무료
  - 크롤러 코드는 공개해도 문제없음
  - 즉시 비용 리스크 제거

**대안:**
- 크롤러 실행 시간 최적화
- 크롤러 실행 빈도 조정

---

### 리스크 2: Supabase 대역폭

**문제:**
- 무료 플랜: 5GB/월
- 예상 사용량: 1.3GB/월 (26% 사용률)
- 사용자 증가 시 대역폭 증가 가능

**해결책:**
- 검색 결과 캐싱
- 페이지네이션 활용
- 이미지 최적화
- 불필요한 데이터 전송 최소화

---

### 리스크 3: 예상치 못한 트래픽 급증

**문제:**
- 바이럴 효과로 인한 사용량 급증
- 모든 서비스 한도 동시 초과 가능

**해결책:**
- Rate Limiting 설정
- 실시간 사용량 모니터링
- 급증 감지 알림
- 필요 시 일시적 기능 제한

---

## 📋 모니터링 체크리스트

### 일일 모니터링
- [ ] Vercel 함수 실행 시간
- [ ] Supabase 데이터베이스 크기
- [ ] Supabase 대역폭 사용량
- [ ] GitHub Actions 실행 시간 (Private repo인 경우)

### 주간 모니터링
- [ ] 전체 서비스 사용량 리포트
- [ ] 사용량 트렌드 분석
- [ ] 예상 한도 초과 시점 계산

### 알림 설정
- [ ] Vercel: 80GB-hours 사용 시 알림
- [ ] Supabase: 400MB DB 사용 시 알림
- [ ] Supabase: 4GB 대역폭 사용 시 알림
- [ ] GitHub Actions: 1,600분 사용 시 알림 (Private repo)

---

## 🎯 Phase 1 비용 최소화 핵심 전략

1. **✅ Public Repository 전환**
   - GitHub Actions 무제한 무료
   - 즉시 비용 리스크 제거

2. **✅ 데이터 최적화**
   - 오래된 로그 정리
   - 불필요한 데이터 삭제
   - 쿼리 최적화

3. **✅ 캐싱 활용**
   - 검색 결과 캐싱
   - API 응답 캐싱
   - 대역폭 절감

4. **✅ 모니터링 강화**
   - 실시간 사용량 추적
   - 알림 설정
   - 예측 분석

---

## 📝 요약

**Phase 1 비용 전략:**
- ✅ 완전 무료 운영 ($0/월)
- ✅ 모든 서비스 무료 플랜 활용
- ✅ Public Repository 전환으로 GitHub Actions 리스크 제거
- ✅ 철저한 모니터링 및 최적화

**핵심 메시지:**
> Phase 1에서는 수익화 전까지 비용을 발생시키지 않고, 무료 플랜 내에서 모든 기능을 제공합니다. GitHub Actions는 Public Repository로 전환하여 무제한 무료를 활용하고, 다른 서비스들도 모니터링을 통해 한도 내에서 운영합니다.
